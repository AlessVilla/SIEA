<!DOCTYPE html>
<html lang="en">
<!-- Descargar SweetAlert -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.css">
<head>
  <title>¬°RESERVA TUS ESPACIOS CON SIEA! üíöüíô</title>
  <title>Reserva tu espacio, evento, capacitaci√≥n, integraci√≥n, etc., de forma autom√°tica en SIEA üíöüíô</title>
  <!-- Agrega la biblioteca Google API Client Library para JavaScript -->
  <script src="https://apis.google.com/js/api.js"></script>
  <!-- incluir el plugin de anotaci√≥n de Chart.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/0.5.7/chartjs-plugin-annotation.min.js"></script>
  <!-- Agrega el SDK de Firebase -->
  <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-app.js"></script>
  <!-- Agrega el bloque del SDK de Firebase Realtime Database -->
  <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-database.js"></script>
  <!-- Agrega el bloque del SDK de Firebase Authentication -->
  <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-auth.js"></script>
  <!-- Agrega el bloque del SDK de Firebase Cloud Firestore -->
  <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-firestore.js"></script>
  <!-- Agrega la biblioteca para enviar correos en Email.js -->  
  <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
  <!-- Agrega la biblioteca para enviar correos por API Gmail -->  
  <script src="https://apis.google.com/js/client.js"></script>
  <!-- Agrega la biblioteca para enviar correos por SMTPJS -->  
  <script src="https://smtpjs.com/v3/smtp.js"></script>
  <!-- Importar el google auth provider para autenticar con google -->  
  <!-- <script import { GoogleAuthProvider } from "firebase/auth"></script> -->  
  <!-- Agrega la biblioteca para enviar correos por SMTPJS -->  
  <script src="https://smtpjs.com/v3/smtp.js"></script>
  <!-- Agrega la biblioteca Google API Client -->  
  <script src="https://apis.google.com/js/api.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <meta charset="utf-8">
  <link rel="stylesheet" href="style.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SIEA üíöüíô</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Incluir Chart.js desde una CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Incluir el archivo JavaScript desde la carpeta config dentro del repositorio -->
  <script>
    /*ENCUESTAS DE SATISFACCI√ìN SIEA
    Eval√∫a tu espacio o evento de forma autom√°tica con el Sistema Integral de Espacios Documental.*/
    var firebaseConfig = {
        apiKey: "AIzaSyBoPvkQzuVG5LA_HXqw34MiHzB4Y3ro7Kw",
        authDomain: "bddreservaaneiapuninorte.firebaseapp.com",
        projectId: "bddreservaaneiapuninorte",
        storageBucket: "bddreservaaneiapuninorte.appspot.com",
        messagingSenderId: "227754886829",
        appId: "1:227754886829:web:00047755b1aaa727242824",
        measurementId: "G-S0LH1M6FQ4" // Esta l√≠nea es opcional, solo si est√°s utilizando Firebase Analytics
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const provider = new firebase.auth.GoogleAuthProvider();
    const firestore = firebase.firestore();
  </script>

  <title>SIEA (Sistema Integral de Espacios ANEIAP)</title>
  <style>
    body {
      /* Establece la imagen de fondo */
      background-image: url('https://i.ibb.co/gzwRXW2/FOTO-FONDO-SIEA-SNC2023-1.jpg');
      /* Fija la imagen de fondo para que no se desplace con el contenido */
      background-attachment: fixed;
      /* Escala la imagen para cubrir todo el cuerpo */
      background-size: contain;
      /* Centra la imagen */
      background-position: center;
      /* Establece un color de fondo de respaldo */
      background-color: #f8f8f8; /* Este color ser√° visible si la imagen no se carga */
    }
    @font-face {
      font-family: 'Century Gothic';
      src: url('ruta/a/la/fuente/CenturyGothic.woff2') format('woff2'),
          url('ruta/a/la/fuente/CenturyGothic.woff') format('woff');
      /* Agrega m√°s formatos de fuentes si es necesario */
      font-weight: normal;
      font-style: normal;
    }
    /* Estilos para el contenedor de la imagen */
    .centered-text {
      text-align: center;
    }
    .image-container {
      display: flex;
      justify-content: center;
      animation: slide-in 2s ease-in-out;
    }
    @keyframes slide-in {
      0% {
        transform: translateX(-100%);
      }
      100% {
        transform: translateX(0);
      }
    }
    .image-container img {
      max-width: 15%;
      height: auto;
      transition: transform 6s ease-in-out;
    }
    .image-container img:hover {
      transform: rotate(4320deg);
    }
    /* Estilos para el cuadro de datos generales del evento */
    .datos-generales,
    .datos-organizador,
    .datos-ponente {
      background-color: rgb(253, 198, 166);
      padding: 10px;
      margin-bottom: 20px;
    }
    /* Estilos para los campos de formulario */
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
      font-size: 18px;
    }
    select, textarea, input[type="text"], input[type="date"], input[type="email"], input[type="tel"] {
      width: 100%;
      margin-top: 5px;
      font-size: 18px;
    }
    h2 {
      font-size: 22px;
      text-transform: uppercase;
    }
    .reserva {
      background-color: darkgreen;
      color: white;
      padding: 5px 10px;
      font-weight: bold;
      cursor: pointer;
      text-align: center;
      font-size: 20px;
    }
    .row {
      display: flex;
      justify-content: space-between;
    }
    .row .half {
      width: 48%;
    }
    .third {
      flex-basis: 33.33%;
      padding: 0 15px;
      box-sizing: border-box;
    }
    .disponibilidad-group {
      margin-bottom: 15px;
      background-color: #c3d6ff; /* Color de fondo azul muy claro */
      padding: 10px;
      border: 1px solid #0004ff; /* Borde azul */
      border-radius: 8px; /* Bordes redondeados para el contenedor */
    }    
    .reservar-group {
      margin-bottom: 15px;
      background-color: #a8f7a1D9; /* Color de fondo verde muy claro */
      padding: 10px;
      border: 1px solid #15ff00D9; /* Borde verde claro */
      border-radius: 8px; /* Bordes redondeados para el contenedor */
    }
    .editar-group {
      margin-bottom: 15px;
      background-color: #ffc67c; /* Color de fondo naranja muy claro */
      padding: 10px;
      border: 1px solid #ff9100; /* Borde naranja claro */
      border-radius: 8px; /* Bordes redondeados para el contenedor */
    }
    .eliminar-group {
      margin-bottom: 15px;
      background-color: #fd8c8ca4; /* Color de fondo rojo muy claro */
      padding: 10px;
      border: 1px solid #ff0000a4; /* Borde rojo */
      border-radius: 8px; /* Bordes redondeados para el contenedor */
    }
    .acordeon4-content-inner {
      margin-bottom: 15px;
      background-color: #D55DFF; /* Color de fondo rojo muy claro */
      padding: 10px;
      border: 1px solid #9900CC; /* Borde rojo */
      border-radius: 8px; /* Bordes redondeados para el contenedor */
    }
    .actualizar-group {
      margin-bottom: 15px;
      background-color: #cccccc; /* Color de fondo rojo muy claro */
      padding: 10px;
      border: 1px solid #4d4d4d; /* Borde rojo */
      border-radius: 8px; /* Bordes redondeados para el contenedor */
    }
    .radio-buttons-container {
      display: flex;
      justify-content: center;
      gap: 20px; /* Espacio entre los botones S√ç y NO */
    }
    .custom-file-input {
      display: inline-block;
      position: relative;
    }
    .custom-file-input input[type="file"] {
      opacity: 0;
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      cursor: pointer;
    }
    .custom-file-input label {
      background-color: #3498db;
      color: #fff;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }    
    .field-container {
      background-color: #fff;
      padding: 10px; /* Ajusta el valor seg√∫n el espacio deseado entre el contenido y el borde */
      border-radius: 5px; /* Ajusta el valor para cambiar la curvatura de las esquinas */
    }
    /* Estilos para los acordeones */
    .acordeon0, .acordeon1, .acordeon2, .acordeon3, .acordeon4, .acordeon5 {
      color: white;
      padding: 5px 10px;
      font-weight: bold;
      cursor: pointer;
      text-align: center;
      font-size: 20px;
      margin-bottom: 10px;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .acordeon0 {
      background-color: #307B98;
    }
    .acordeon0-content, .acordeon1-content, .acordeon2-content, .acordeon3-content, .acordeon4-content, .acordeon5-content {
      background-color: white;
      padding: 10px;
      margin-bottom: 20px;
    }
    .acordeon1 {
      background-color: #00B30F;
    }
    .acordeon2 {
      background-color: #F47B28;
    }
    .acordeon3 {
      background-color: #DC1E1E;
    }
    .acordeon4 {
      background-color: #600082;
    }
    .acordeon5 {
      background-color: #4d4d4d;
    }
    .button-consultar-disponibilidad, .button-reservar, .button-consultar, .button-consultar, .button-evaluar, .button-eliminar, .button-actualizar {
      color: white;
      padding: 5px 10px;
      font-weight: bold;
      cursor: pointer;
      text-align: center;
      font-size: 18px;
      margin-bottom: 10px; /* A√±adido para separar el bot√≥n de los campos */
      width: 353px; /* Ocupar el ancho del contenedor */
    }
    .button-consultar-disponibilidad {
      background-color: rgb(0, 4, 255);
    }
    .button-reservar {
      background-color: rgb(0, 141, 37);
    }
    .button-consultar {
      background-color: orange;
    }
    .button-eliminar {
      background-color: red;
    }
    .button-evaluar {
      background-color: #600082;
    }
    .button-actualizar {
      background-color: #4d4d4d;
    }
    /* Estilo para los campos de correo del forms y contrase√±a */
    input[type="email"],
    input[type="password"] {
      font-size: 18px; /* Mismo tama√±o de fuente que el bot√≥n */
      padding: 5px 10px;
      margin-bottom: 10px; /* Espaciado inferior */
      width: 150px; /* Ocupar el ancho del contenedor */
    }
    .disponibilidad-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    .disponibilidad-item {
      width: 100px;
      height: 50px;
      margin: 5px;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-weight: bold;
      font-size: 16px;
    }
    .disponibilidad-item.green {
      background-color: green;
    }
    .disponibilidad-item.red {
      background-color: red;
    }
    .disponibilidad-item.gray {
      background-color: rgb(185, 185, 185);
    }
    /* Estilos para las pesta√±as */
    .tab-container {
      display: flex;
    }
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border: 1px solid #9900CC;
      background-color: #f7d1f3;
      border-radius: 8px 8px 0 0;
    }
    .tab:hover {
      background-color: #f0f0f0;
    }
    /* Estilos para los contenidos de las pesta√±as */
    .tab-content {
      display: none;
      padding: 10px;
      border: 3px solid #D55DFF;
      background-color: #f7d1f3;
      border-radius: 20 20px 20px 20px;
      width: 100%
    }
    /* Mostrar el contenido de la pesta√±a activa */
    .tab-content.active {
      display: block;
    }    
    /* Estilos para el bot√≥n */
    #modo-switch {
      position: fixed;
      top: 10px;
      right: 10px;
      width: 60px; /* Aumenta el ancho del bot√≥n */
      height: 40px; /* Aumenta la altura del bot√≥n */
      background-color: #777777; /* Color de fondo del bot√≥n en light mode */
      border-radius: 50%; /* Hace que el bot√≥n sea circular */
      cursor: pointer;
      border: none;
      outline: none;
      padding: 2px;
      display: flex; /* Para centrar verticalmente el emoji */
      justify-content: center; /* Para centrar horizontalmente el emoji */
      align-items: center; /* Para centrar verticalmente el emoji */
    }
    /* Estilos para el √≠cono del sol */
    .icon::before {
      content: "\2600"; /* C√≥digo Unicode para el sol */
      font-size: 28px; /* Aumenta el tama√±o del emoji */
      color: #ffcc00; /* Color del sol en light mode */
      display: inline-block;
    }
    /* Estilos para el √≠cono de la luna */
    .dark-mode .icon::before {
      content: "\1F319"; /* C√≥digo Unicode para la luna */
      color: #333; /* Color de la luna en dark mode */
    }
    body.light-mode {
      background-color: white; /* Fondo blanco en el modo claro */
      transition: background-color 1s ease; /* Efecto de transici√≥n suave */
    }
    body.dark-mode {
      background-color: rgb(29, 29, 29); /* Fondo negro en el modo oscuro */
      transition: background-color 1s ease; /* Efecto de transici√≥n suave */
    }
    body {
      transition: background-color 1s ease; /* Efecto de transici√≥n suave para todo el cuerpo */
      font-family: 'Century Gothic', sans-serif;
    }
    /* Estilo del texto en modo claro */
    .light-mode {
      color: black; /* Color del texto en modo claro */
    }
    .logo.dark-mode {
      display: none; /* Oculta el logo del dark mode por defecto */
    }
    /* Estilo del texto en modo oscuro */
    .dark-mode .light-mode {
      color: white; /* Color del texto en modo oscuro */
    }
    /* Estilos para los t√≠tulos de documentos */
    .document-title a {
      text-decoration: none;
      color: black;
      font-weight: bold;
    }
    /* Estilos para los enlaces "AQU√ç" */
    .document-link a {
      text-decoration: none;
      color: blue;
      font-weight: bold;
    }
    /* Estilos para el icono de Word */
    .document-link img {
      width: 16px;
      height: 16px;
      margin-left: 5px;
    }
    .swal2-content {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .swal2-input {
      width: 100%;
      box-sizing: border-box;
      margin-bottom: 10px; /* Ajusta seg√∫n sea necesario */
    }
    /* Estilos para la tabla resumen */
    #tabla-resumen {
        width: 100%;
        border-collapse: collapse;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        overflow-x: auto; /* Permitir desplazamiento horizontal */
    }
    #tabla-resumen-container {
    width: 100%;
    overflow-x: auto; /* Permitir desplazamiento horizontal si es necesario */
    }
    #tabla-resumen th,
    #tabla-resumen td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
    }
    #tabla-resumen th {
        background-color: #76c04e;
    }
    #tabla-resumen tbody tr:nth-child(even) {
        background-color: #f9f9f9;
    }
    #tabla-resumen tbody tr:hover {
        background-color: #76c04e;
        transition: background-color 0.3s ease;
    }
    #tabla-resumen td:nth-child(n + 8) {
        text-align: center;
    }
    #tabla-resumen td:nth-child(13) {

        font-size: 10px;
        overflow: hidden;
    }
    /* Ajuste de anchos de columnas */
    #tabla-resumen th,
    #tabla-resumen td {
        width: auto; /* Permitir que las columnas se ajusten autom√°ticamente */
    }
    #tabla-evaluaciones {
    width: 100%;
    border-collapse: collapse;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    overflow-x: auto; /* Permitir desplazamiento horizontal */
    }
    #tabla-evaluaciones th,
    #tabla-evaluaciones td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
    }
    #tabla-evaluaciones th {
        background-color: #76c04e;
    }
    #tabla-evaluaciones tbody tr:nth-child(even) {
        background-color: #f9f9f9;
    }
    #tabla-evaluaciones tbody tr:hover {
        background-color: #76c04e;
        transition: background-color 0.3s ease;
    }
    /* Ajuste de anchos de columnas */
    #tabla-evaluaciones th,
    #tabla-evaluaciones td {
        width: auto; /* Permitir que las columnas se ajusten autom√°ticamente */
    }
    /* Alineaci√≥n de columnas */
    #tabla-evaluaciones td:nth-child(1),
    #tabla-evaluaciones td:nth-child(2),
    #tabla-evaluaciones td:nth-child(7) {
        text-align: left; /* Columnas de nombre del asistente, correo asistente y comentarios alineadas a la izquierda */
    }
    #tabla-evaluaciones td {
        text-align: center; /* Resto de columnas centradas */
    }
    /* Estilos para el contenedor del calendario */
    #calendario-semanal {
      margin: 20px auto; /* Margen externo para centrar el calendario */
      width: 100%; /* Ancho del calendario */
    }
    /* Estilos para la tabla del calendario */
    .calendario-semanal-table {
      width: 100%; /* Ancho de la tabla */
      border-collapse: collapse; /* Colapso de bordes de celda */
    }
    /* Estilos para las celdas del encabezado */
    .calendario-semanal-table th {
      background-color: #618796; /* Color de fondo */
      padding: 10px; /* Espaciado interno */
      text-align: left; /* Alineaci√≥n de texto a la izquierda */
      border-bottom: 1px solid #ddd; /* Borde inferior */
      color: #fff; /* Color del texto */
    }
    /* Estilos para las celdas del cuerpo */
    .calendario-semanal-table td {
      padding: 10px; /* Espaciado interno */
      border-bottom: 1px solid #ddd; /* Borde inferior */
    }
    /* Estilos para las filas impares del cuerpo */
    .calendario-semanal-table tbody tr:nth-child(odd) {
      background-color: #f9f9f9; /* Color de fondo para filas impares */
    }
    /* Estilos para la primera columna (d√≠a de la semana) */
    .calendario-semanal-table tbody td:first-child {
      width: 15%; /* Ancho del 10% para la primera columna */
    }
    /* Estilos para la segunda columna (eventos reservados) */
    .calendario-semanal-table tbody td:nth-child(2) {
      width: 85%; /* Ancho del 90% para la segunda columna */
      margin: 0; /* Eliminar margen interno del p√°rrafo */
    }
    /* Estilos para las filas al pasar el mouse */
    .calendario-semanal-table tbody tr:hover {
      background-color: #76c04e; /* Cambio de color al pasar el mouse */
      cursor: pointer; /* Cambio de cursor al pasar el mouse */
    }
    /* Estilos para centrar los encabezados */
    .calendario-semanal-table th {
      text-align: center; /* Alineaci√≥n centrada */
    }

  </style>
</head>
<body class="dark-mode">

    <!-- Bot√≥n de modo de visualizaci√≥n-->
    <!--<button id="modo-switch" class="light-mode">
      <span class="icon"></span>
    </button>-->

  <script src="script.js"></script>
  <div class="main-content">
    <!-- El contenido principal de tu p√°gina va aqu√≠ -->
  </div>

  <!-- DETALLES DEL ACORDE√ìN 1 QUE CORRESPONDE A REGISTRAR LA RESERVA DEL EVENTO-->
  <div class="acordeon1">REGISTRA TU ESPACIO ‚úèÔ∏è</div>
  <div id="acordeon1-content" style="display: block;">
    <div class="acordeon1-content-inner">
      <div class="reservar-group">
        <div>
        <button class="button-reservar" onclick="window.location.href = 'https://alessvilla.github.io/SIEA/public/index.html'">‚¨ÖÔ∏è VOLVER AL INICIO</button>
        </div>
      <h2 style="font-size: 22px; text-transform: uppercase;"><p style="text-align: center;">DATOS GENERALES DEL EVENTO ü¶â</p></h2>
      <div class="row">
      <div class="half">
      <label for="nombre-evento"><b>Nombre del evento: *</b></label>
      <input type="text" id="nombre-evento" placeholder="Ingresa el nombre de tu evento.">
      <label for="fecha-evento"><b>Fecha del evento: *</b></label>
      <input type="date" id="fecha-evento">
      <label for="hora-evento"><b>Hora para el evento: *</b></label>
      <select id="hora-evento">
        <option value="" disabled selected hidden>Selecciona la hora de la reserva.</option>
        <option value="480">08:00</option>
        <option value="510">08:30</option>
        <option value="540">09:00</option>
        <option value="570">09:30</option>
        <option value="600">10:00</option>
        <option value="630">10:30</option>
        <option value="660">11:00</option>
        <option value="690">11:30</option>
        <option value="720">12:00</option>
        <option value="750">12:30</option>
        <option value="780">13:00</option>
        <option value="810">13:30</option>
        <option value="840">14:00</option>
        <option value="870">14:30</option>
        <option value="900">15:00</option>
        <option value="930">15:30</option>
        <option value="960">16:00</option>
        <option value="990">16:30</option>
        <option value="1020">17:00</option>
        <option value="1050">17:30</option>
        <option value="1080">18:00</option>
        <option value="1110">18:30</option>
        <option value="1140">19:00</option>
        <option value="1170">19:30</option>
        <option value="1200">20:00</option>
        <option value="1230">20:30</option>
        <option value="1260">21:00</option>
      </select>
      </div>
      <div class="half">
      <label for="duracion-evento"><b>Duraci√≥n del evento (en horas): *</b></label>
      <select id="duracion-evento">
        <option value="" disabled selected hidden>Selecciona la duraci√≥n del evento.</option>
        <option value="30">media hora</option>
        <option value="60">1 hora</option>
        <option value="90">1 hora y media</option>
        <option value="120">2 horas</option>
        <option value="150">2 horas y media</option>
        <option value="180">3 horas</option>
        <option value="210">3 horas y media</option>
        <option value="240">4 horas</option>
        <option value="270">4 horas y media</option>
        <option value="300">5 horas</option>
        <option value="330">5 horas y media</option>
        <option value="360">6 horas</option>
      </select>
      <label for="modalidad-evento"><b>Modalidad evento: *</b></label>
      <select id="modalidad-evento" onchange="toggleUbicacionPlataforma()">
        <option value="" disabled selected hidden>Selecciona la modalidad del evento.</option>
        <option value="virtual">Virtual</option>
        <option value="presencial">Presencial</option>
      </select>
      <div id="ubicacion-plataforma-container" style="display: none;">
        <label for="ubicacion-plataforma"><b>Ubicaci√≥n/Plataforma en la reserva: *</b></label>
        <select id="ubicacion-plataforma">
          <option value="" disabled selected hidden>Selecciona la plataforma para el evento.</option>
          <option value="meet">Meet</option>
          <option value="zoom">Zoom</option>
          <option value="teams">Teams</option>
          <option value="otro">Otro</option>
        </select>
      </div>
      <div id="lugar-presencial-container" style="display: none;">
        <label for="lugar-presencial"><b>Especifica el lugar f√≠sico del evento: *</b></label>
        <input type="text" id="lugar-presencial" placeholder="Escribe el lugar donde el evento se realizar√°.">
      </div>
      </div>
      </div>
      <div class="row">
      <div class="half">
      <label for="plan-evento"><b>Plan del evento: *</b></label>
      <textarea id="plan-evento" rows="5" placeholder="Detalla el paso a paso de lo que se realizar√° en el evento y cu√°les son las estrategias para garantizar que este s√≠ se lleve a cabo de forma exitosa."></textarea>
      </div>
      <div class="half">
      <label for="observaciones-evento"><b>Observaciones:</b></label>
      <textarea id="observaciones-evento" rows="5" placeholder="Especifica cualquier observaci√≥n adicional que desees que sea tenida en cuenta para el desarrollo del evento."></textarea>
      </div>
      </div>
      <div class="row">
        <div class="half">
          <h2 style="font-size: 22px; text-transform: uppercase;"><p style="text-align: center;">DATOS DEL ORGANIZADOR</p></h2>
          <label for="nombre-organizador"><b>Nombre del organizador: *</b></label>
          <input type="text" id="nombre-organizador" placeholder="Ingresa tu nombre.">
          <div class="row">
            <div class="half">
                <label for="email-organizador"><b>Email: *</b></label>
                <input type="text" id="email-organizador" placeholder="Ingresa tu email.">
            </div>
            <div class="half">
                <label for="capitulo-organizador"><b>Cap√≠tulo:</b></label>
                <select id="capitulo-organizador">
                  <option value="" disabled selected hidden>Selecciona el cap√≠tulo para el que aplica la reserva.</option>
                  <option value="uniguajira">UNIGUAJIRA</option>
                  <option value="unimagdalena">UNIMAGDALENA</option>
                  <option value="uniatlantico">UNIATL√ÅNTICO</option>
                  <option value="uninorte">UNINORTE</option>
                  <option value="cuc">CUC</option>
                  <option value="librequilla">LIBREQUILLA</option>
                  <option value="utb">UTB</option>
                  <option value="ufps">UFPS</option>
                  <option value="unalmed">UNALMED</option>
                  <option value="udea">UDEA</option>
                  <option value="upbmed">UPBMED</option>
                  <option value="utp">UTP</option>
                  <option value="unalma">UNALMA</option>
                  <option value="udistrital">UDISTRITAL</option>
                  <option value="unalbog">UNALBOG</option>
                  <option value="univalle">UNIVALLE</option>
                  <option value="icesi">ICESI</option>
                  <option value="usc">USC</option>
                  <option value="librecali">LIBRECALI</option>
                  <option value="nacional">ANEIAP NACIONAL</option>
                </select>
            </div>
          </div>
          <label for="telefono-organizador"><b>Tel√©fono del organizador: *</b></label>
          <input type="tel" id="telefono-organizador" placeholder="Ingresa tu n√∫mero de tel√©fono.">
        </div>
        <div class="half">
          <h2 style="font-size: 22px; text-transform: uppercase;"><p style="text-align: center;">DATOS DEL PONENTE</p></h2>
          <label for="nombre-ponente"><b>Nombre del ponente: *</b></label>
          <input type="text" id="nombre-ponente" placeholder="Ingresa el nombre del ponente.">
          <label for="email-ponente"><b>Email ponente:</b></label>
          <input type="text" id="email-ponente" placeholder="Ingresa el email del ponente.">
          <label for="telefono-ponente"><b>Tel√©fono del ponente:</b></label>
          <input type="tel" id="telefono-ponente" placeholder="Ingresa el n√∫mero de tel√©fono del ponente.">
        </div>
      </div>
      <h2 style="font-size: 22px; text-transform: uppercase;"><p style="text-align: center;">DATOS PARA EL COMIT√â DE PIEZAS</p></h2>
      <div class="row">
        <div class="third">
          <label for="publicidad-comite"><b>¬øDeseas que el comit√© de piezas capitular te realice la publicidad del espacio? *</b></label>
          <select id="publicidad-comite">
            <option value="si">S√ç</option>
            <option value="no">NO</option>
          </select>
        </div>
        <div class="third">
          <label for="observaciones-publicidad"><b>Observaciones para que el comit√© de piezas tenga en cuenta al hacer tu publicidad:</b></label>
          <textarea id="observaciones-publicidad" rows="1" placeholder="Ingresa observaciones para la publicidad del evento."></textarea>
        </div>
        <div class="third">
          <label for="foto-ponente"><b>Enlace de Google Drive de la foto del ponente para colocar en la pieza:</b></label>
          <input type="text" id="foto-ponente" placeholder="Ingresa el enlace de Google Drive, debe estar compartido para cualquier correo.">
        </div>
      </div>
      <button class="button-reservar" onclick="registrarEvento()">Registrar evento</button>
      <button onclick="iniciarSesionJDN()">JDN</button>
      </div>
    </div>
  </div>

  <script>

    // Variable global del correo del usuario para mirar si inici√≥ sesi√≥n un DCA o DNA.
    var correoUsuario = "asociado@aneiap.co"; //deben estar vac√≠as, solo que tengo flojera de iniciar sesi√≥n.
    var capituloUsuario = "asociado";
    var escogioPublicidadNacional = "no";

    // Esta funci√≥n permite cambiar la visibilidad de los campos "ubicaci√≥n/plataforma" y "lugar presencial"
    // en la secci√≥n "REGISTRAR RESERVA (AC1)" seg√∫n la modalidad seleccionada.
    function toggleUbicacionPlataforma() {
      // Obtenemos los elementos HTML correspondientes a los contenedores de ubicaci√≥n/plataforma y lugar presencial.
      var ubicacionPlataformaContainer = document.getElementById("ubicacion-plataforma-container");
      var lugarPresencialContainer = document.getElementById("lugar-presencial-container");
      
      // Obtenemos el valor seleccionado en el campo "modalidad-evento".
      var modalidadEvento = document.getElementById("modalidad-evento").value;

      // Comparamos el valor seleccionado con las opciones.
      if (modalidadEvento === "virtual") {
        // Si la modalidad es "virtual", mostramos el campo "ubicaci√≥n/plataforma" y ocultamos "lugar presencial".
        ubicacionPlataformaContainer.style.display = "block";
        lugarPresencialContainer.style.display = "none";
      } else if (modalidadEvento === "presencial") {
        // Si la modalidad es "presencial", mostramos "lugar presencial" y ocultamos "ubicaci√≥n/plataforma".
        ubicacionPlataformaContainer.style.display = "none";
        lugarPresencialContainer.style.display = "block";
      } else {
        // En caso contrario, ocultamos ambos campos.
        ubicacionPlataformaContainer.style.display = "none";
        lugarPresencialContainer.style.display = "none";
      }
    }

    // Ac√° est√° la funci√≥n para agregar un evento en la colecci√≥n "reservas" y documento "basededatos",
    // tambi√©n tiene en cuenta la posibilidad de adjuntar imagen del ponente y reiniciar√° los campos cuando se registren.
    function agregarEventoFirestore(nombreEvento, claveEvento, fechaEvento, horaEvento, duracionEvento, modalidadEvento, ubicacionPlataforma, lugarPresencial, planEvento, observacionesEvento, nombreOrganizador, emailOrganizador, capitulo, telefonoOrganizador, nombrePonente, emailPonente, telefonoPonente, publicidadComite, observacionesPublicidad, fotoPonenteURL) {
      // Obtener una referencia a la colecci√≥n "reservas" en Firestore
      const db = firebase.firestore().collection("reservas").doc(claveEvento);

      db.set({
        nombreEvento: nombreEvento,
        claveEvento: claveEvento,
        fechaEvento: fechaEvento,
        horaEvento: horaEvento,
        duracionEvento: duracionEvento,
        modalidadEvento: modalidadEvento,
        ubicacionPlataforma: ubicacionPlataforma,
        lugarPresencial: lugarPresencial,
        planEvento: planEvento,
        observacionesEvento: observacionesEvento,
        nombreOrganizador: nombreOrganizador,
        emailOrganizador: emailOrganizador,
        capitulo: capitulo,
        capitulosOrganizadores: [capitulo],
        telefonoOrganizador: telefonoOrganizador,
        nombrePonente: nombrePonente,
        emailPonente: emailPonente,
        telefonoPonente: telefonoPonente,
        publicidadComite: publicidadComite,
        observacionesPublicidad: observacionesPublicidad,
        fotoPonenteURL: fotoPonenteURL,
        // Agrega aqu√≠ los dem√°s campos del evento que deseas guardar
        // ...
        detractores: 0,
        pasivos: 0,
        promotores: 0,
        satisfaccion: 0,
        crm: "no",
      })
      .then((docRef) => {
        // √âxito: el evento se ha registrado correctamente en el documento existente
        // Aqu√≠ puedes agregar cualquier otra l√≥gica que desees despu√©s de agregar el evento
        // Muestra el mensaje de reserva completada
        mostrarMensajeReservar();
      })
      .catch((error) => {
        // Error: hubo un problema al registrar el evento
        console.error("ERROR AL REGISTRAR EL EVENTO: ", error);
        Swal.fire({
          title: '¬°ERROR!',
          text: 'Ha ocurrido un error al registrar el evento. Int√©ntalo nuevamente m√°s tarde o consulta en el link de dudas, reclamos e inquietudes arriba.',
          icon: 'error',
          imageUrl: 'https://i.ibb.co/PZ7KXF9/AVATAR-ERRORES-removebg-preview.png', // URL de la imagen
          confirmButtonText: 'Aceptar',
          imageWidth: 342, // Ancho de la imagen en p√≠xeles
          imageHeight: 200, // Alto de la imagen en p√≠xeles
          imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
        });
      });
    }    

    // Esta funci√≥n genera una clave de evento aleatoria.
    // La clave tiene siempre una cantidad total de 15 caracteres (letras may√∫sculas y d√≠gitos) de forma aleatoria.
    function generarClaveEvento() {
      // Definimos una cadena de caracteres que contendr√° letras may√∫sculas y d√≠gitos.
      var caracteres = "ABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890123456789";
      
      // Especificamos la longitud deseada para la clave generada.
      var longitud = 15;
      
      // Inicializamos una variable para almacenar la clave generada.
      var claveGenerada = "";

      // Iniciamos un bucle para generar cada car√°cter de la clave.
      for (var i = 0; i < longitud; i++) {
        // Generamos un n√∫mero aleatorio entre 0 (inclusive) y la longitud de la cadena de caracteres.
        var indiceAleatorio = Math.floor(Math.random() * caracteres.length);
        
        // Agregamos el car√°cter correspondiente al √≠ndice aleatorio a la clave generada.
        claveGenerada += caracteres.charAt(indiceAleatorio);
      }

      // Devolvemos la clave generada como resultado.
      return claveGenerada;
    }

    function registrarEvento() {

      // Validar que todos los campos est√©n llenos
      var camposValidos = validarCamposRegistrarReserva();

      // Si todos los campos est√°n llenos, proceder con la reserva
      if (camposValidos) {
        // Verificar si la fecha del evento es v√°lida (mayor a la fecha actual)
        var fechaEvento = new Date(document.getElementById("fecha-evento").value);
        var horaEvento = new Date(document.getElementById("hora-evento").value);
        console.log("horaEvento: " + horaEvento);
        console.log("duracionEvento: " + duracionEvento);
        var duracionEvento = new Date(document.getElementById("duracion-evento").value);

        var fechaActual = new Date();
        console.log("Fecha actual antes de restar un d√≠a:", fechaActual);
        fechaActual.setDate(fechaActual.getDate() - 2); // Restar 2 d√≠as a la fecha actual
        var fechaActualISOS = fechaActual.toISOString().slice(0, 10);
        console.log("Fecha actual en formato ISO despu√©s de restar un d√≠a:", fechaActualISOS);
        fechaActual.setDate(fechaActual.getDate() + 1); // Recuperar (sumar) 1 d√≠a a la fecha actual
        console.log("Fecha actual despu√©s de restar un d√≠a:", fechaActual);

        var emailOrganizador = document.getElementById("email-organizador").value;
        // Verificar si el correo es igual a "aneiap_nacional@aneiap.co"
        if (emailOrganizador === "aneiap_nacional@aneiap.co") {
          Swal.fire({
            title: '¬°CORREO PROHIBIDO!',
            text: 'El correo aneiap_nacional@aneiap.co no puede ser organizador, recuerda que ac√° va el correo de quien es el organizador. Por favor, utiliza un correo diferente.',
            icon: 'warning',
            confirmButtonText: 'Aceptar',
            imageUrl: 'https://i.ibb.co/kJ6gs4J/AVATAR-VALIDACIONDATOS-removebg-preview.png', // URL de la imagen
            imageWidth: 120, // Ancho de la imagen en p√≠xeles
            imageHeight: 235, // Alto de la imagen en p√≠xeles
            imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
          });
          return; // Detener la edici√≥n de la reserva
        }

        // Verificar si el correo comienza con "capitulo" o "directivos"
        if (emailOrganizador.toLowerCase().startsWith("capitulo") || emailOrganizador.toLowerCase().startsWith("directivos")) {
          Swal.fire({
            title: '¬°CORREO PROHIBIDO!',
            text: 'Los correos que comienzan con "capitulo" o "directivos" est√°n prohibidos para ser organizador, recuerda que solo el correo del organizador es lo que se escribe ac√°. Por favor, utiliza un correo diferente.',
            icon: 'warning',
            confirmButtonText: 'Aceptar',
            imageUrl: 'https://i.ibb.co/kJ6gs4J/AVATAR-VALIDACIONDATOS-removebg-preview.png', // URL de la imagen
            imageWidth: 120, // Ancho de la imagen en p√≠xeles
            imageHeight: 235, // Alto de la imagen en p√≠xeles
            imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
          });
          return; // Detener la edici√≥n de la reserva
        }

        // Verificar si el correo termina con "@aneiap.co"
        if (!emailOrganizador.toLowerCase().endsWith("@aneiap.co")) {
            Swal.fire({
                title: '¬°CORREO INCORRECTO!',
                text: 'El correo electr√≥nico debe terminar con "@aneiap.co". Por favor, utiliza un correo v√°lido.',
                icon: 'warning',
                confirmButtonText: 'Aceptar',
                imageUrl: 'https://i.ibb.co/kJ6gs4J/AVATAR-VALIDACIONDATOS-removebg-preview.png', // URL de la imagen
                imageWidth: 120, // Ancho de la imagen en p√≠xeles
                imageHeight: 235, // Alto de la imagen en p√≠xeles
                imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
            });
            return; // Detener la edici√≥n de la reserva
        }

        // Verificar que el correo sea de alguien de la jdn cuando se reserve a nivel nacional ya que estos eventos bloquean el calendario de todos los cap√≠tulos.
        var capitulo = document.getElementById("capitulo-organizador").value;
        if (capitulo === "nacional" && capituloUsuario !== "nacional") {
          console.log("el usuario quiere reservar a nivel nacional.")
          Swal.fire({
            title: '¬°NO TIENES PERMISOS PARA RESERVAR A NIVEL NACIONAL!',
            text: 'Solo los hom√≥logos nacionales (junta nacional) tienen permiso para reservar a nivel nacional, si deseas hacer una reserva nacional, cont√°ctate con ellos.',
            icon: 'warning',
            confirmButtonText: 'Aceptar',
            imageUrl: 'https://i.ibb.co/kJ6gs4J/AVATAR-VALIDACIONDATOS-removebg-preview.png', // URL de la imagen
            imageWidth: 120, // Ancho de la imagen en p√≠xeles
            imageHeight: 235, // Alto de la imagen en p√≠xeles
            imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
          });
          return; // Detener la edici√≥n de la reserva
        }

        // Validaci√≥n de datos para que la fecha con la que se registrar√° el evento sea mayor a la de hoy.
        if ((fechaEvento < fechaActual) || (fechaEvento < fechaActualISOS)) {
          Swal.fire({
            title: '¬°FECHA INCORRECTA!',
            text: 'Debes reservar al menos con UN (1) d√≠a de anticipaci√≥n, debes reiniciar la plataforma y volver a llenar la informaci√≥n, si ya se venci√≥ el plazo y deseas hacerlo igualmente, contacta al administrador.',
            icon: 'warning',
            confirmButtonText: 'Aceptar',
            imageUrl: 'https://i.ibb.co/kJ6gs4J/AVATAR-VALIDACIONDATOS-removebg-preview.png', // URL de la imagen
            imageWidth: 120, // Ancho de la imagen en p√≠xeles
            imageHeight: 235, // Alto de la imagen en p√≠xeles
            imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
          });
          return; // Detener el registro del evento
        }

        // Verificar el formato del tel√©fono del organizador (debe empezar por 3 y tener 10 d√≠gitos)
        var telefonoOrganizador = document.getElementById("telefono-organizador").value;
        var telefonoOrganizadorRegex = /^3\d{9}$/;

        // Validaci√≥n de datos para que el tel√©fono del organizador efectivamente sea un celular v√°lido.
        if (!telefonoOrganizadorRegex.test(telefonoOrganizador)) {
          Swal.fire({
            title: '¬°TEL√âFONO DEL ORGANIZADOR INCORRECTO!',
            text: 'Digita un n√∫mero de tel√©fono v√°lido.',
            icon: 'warning',
            confirmButtonText: 'Aceptar',
            imageUrl: 'https://i.ibb.co/kJ6gs4J/AVATAR-VALIDACIONDATOS-removebg-preview.png', // URL de la imagen
            imageWidth: 120, // Ancho de la imagen en p√≠xeles
            imageHeight: 235, // Alto de la imagen en p√≠xeles
            imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
          });
          return; // Detener el registro del evento
        }

        // Verificar el formato del tel√©fono del ponente (si fue diligenciado)
        var telefonoPonente = document.getElementById("telefono-ponente").value;
        // En caso de haber diligenciado el tel√©fono del ponente, valida que sea una celular v√°lido.
        if (telefonoPonente !== "") {
          var telefonoPonenteRegex = /^3\d{9}$/;

          if (!telefonoPonenteRegex.test(telefonoPonente)) {
            Swal.fire({
              title: '¬°TEL√âFONO DEL PONENTE INCORRECTO!',
              text: 'Digita un n√∫mero de tel√©fono v√°lido.',
              icon: 'warning',
              confirmButtonText: 'Aceptar',
              imageUrl: 'https://i.ibb.co/kJ6gs4J/AVATAR-VALIDACIONDATOS-removebg-preview.png', // URL de la imagen
              imageWidth: 120, // Ancho de la imagen en p√≠xeles
              imageHeight: 235, // Alto de la imagen en p√≠xeles
              imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
            });
            return; // Detener el registro del evento
          }
        }

          // Obtener el enlace del usuario
          var enlaceGoogleDrive = document.getElementById("foto-ponente").value;
          // Expresi√≥n regular para verificar el formato del enlace de Google Drive
          var enlaceGoogleDriveRegex = /^https:\/\/drive\.google\.com\/.*$/;
          var publicidadComite = document.getElementById("publicidad-comite").value

          // Validar el enlace utilizando la expresi√≥n regular
          if (publicidadComite === "si") {
          if (enlaceGoogleDrive !== "") {
          if (!enlaceGoogleDriveRegex.test(enlaceGoogleDrive)) {
            Swal.fire({
              title: "¬°ENLACE INV√ÅLIDO!",
              text: "Por favor, ingresa un enlace de Google Drive v√°lido para la foto del ponente.",
              icon: "warning",
              confirmButtonText: 'Aceptar',
              imageUrl: 'https://i.ibb.co/kJ6gs4J/AVATAR-VALIDACIONDATOS-removebg-preview.png', // URL de la imagen
              imageWidth: 120, // Ancho de la imagen en p√≠xeles
              imageHeight: 235, // Alto de la imagen en p√≠xeles
              imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
            });
            return; // Detener el registro del evento
            }
          }

          }

        // Si todas las verificaciones son exitosas, continuar con el registro del evento
        //PRIMERO VERIFICA QUE HAYA DISPONIBILIDAD PARA CUANDO INGRES√ì LA FECHA, HORA Y DURACI√ìN
        verificarDisponibilidadRegistro().then(function(result) {
          if (!result) {
          // Si no se muestra ning√∫n swal.fire, ejecuta el c√≥digo a continuaci√≥n
          } else {
            // Generar clave evento aleatoria de 10 caracteres (may√∫sculas y n√∫meros)
            var claveEvento = generarClaveEvento();
            // AC√Å EMPIEZA EL PROCESO PARA INSERTAR LA DATA EN LA BASE DE DATOS.
            // Obtenemos todos los campos individualmente
            var nombreEvento = document.getElementById("nombre-evento").value;
            var fechaEvento = document.getElementById("fecha-evento").value;
            var horaEvento = document.getElementById("hora-evento").value;
            var duracionEvento = document.getElementById("duracion-evento").value;
            var modalidadEvento = document.getElementById("modalidad-evento").value;
            var ubicacionPlataforma = document.getElementById("ubicacion-plataforma").value;
            var lugarPresencial = document.getElementById("lugar-presencial").value;
            var planEvento = document.getElementById("plan-evento").value;
            var observacionesEvento = document.getElementById("observaciones-evento").value;
            var nombreOrganizador = document.getElementById("nombre-organizador").value;
            var emailOrganizador = document.getElementById("email-organizador").value;
            var capitulo = document.getElementById("capitulo-organizador").value;
            var telefonoOrganizador = document.getElementById("telefono-organizador").value;
            var nombrePonente = document.getElementById("nombre-ponente").value;
            var emailPonente = document.getElementById("email-ponente").value;
            var telefonoPonente = document.getElementById("telefono-ponente").value;
            var publicidadComite = document.getElementById("publicidad-comite").value;
            var observacionesPublicidad = document.getElementById("observaciones-publicidad").value;
            var fotoPonenteURL = document.getElementById("foto-ponente").value;

            if (publicidadComite === "si") {
              // Mostrar swal.fire para que el usuario seleccione la opci√≥n de publicidad
              swal.fire({
                  title: '¬øDesea enviar la solicitud de publicidad a nivel nacional o capitular?',
                  showDenyButton: true,
                  showCloseButton: false, // Oculta el bot√≥n de cerrar
                  allowOutsideClick: false, // Impide cerrar haciendo clic afuera
                  confirmButtonText: `Nacional`,
                  denyButtonText: `Capitular`,
              }).then((result) => {
                  if (result.isConfirmed) {
                      // Si el usuario elige enviar a nivel nacional
                      enviarSolicitudPublicidadRegistro(claveEvento, "si");
                      agregarEventoFirestore(nombreEvento, claveEvento, fechaEvento, horaEvento, duracionEvento, modalidadEvento, ubicacionPlataforma, lugarPresencial, planEvento, observacionesEvento, nombreOrganizador, emailOrganizador, capitulo, telefonoOrganizador, nombrePonente, emailPonente, telefonoPonente, publicidadComite, observacionesPublicidad, fotoPonenteURL);
                      enviarCorreoRegistro(claveEvento);
                  } else if (result.isDenied) {
                      // Si el usuario elige enviar a nivel capitular
                      enviarSolicitudPublicidadRegistro(claveEvento, "no");
                      agregarEventoFirestore(nombreEvento, claveEvento, fechaEvento, horaEvento, duracionEvento, modalidadEvento, ubicacionPlataforma, lugarPresencial, planEvento, observacionesEvento, nombreOrganizador, emailOrganizador, capitulo, telefonoOrganizador, nombrePonente, emailPonente, telefonoPonente, publicidadComite, observacionesPublicidad, fotoPonenteURL);
                      enviarCorreoRegistro(claveEvento);
                  }
              });
            } else {
              agregarEventoFirestore(nombreEvento, claveEvento, fechaEvento, horaEvento, duracionEvento, modalidadEvento, ubicacionPlataforma, lugarPresencial, planEvento, observacionesEvento, nombreOrganizador, emailOrganizador, capitulo, telefonoOrganizador, nombrePonente, emailPonente, telefonoPonente, publicidadComite, observacionesPublicidad, fotoPonenteURL);
              enviarCorreoRegistro(claveEvento);
            }

          }
        }).catch(function(error) {
            // Maneja cualquier error que pueda ocurrir durante la verificaci√≥n
            console.error("Error al verificar la disponibilidad:", error);
        }); 
        }
    }

    // Esta funci√≥n permite la acci√≥n de mostrar un mensaje de √©xito al momento de registrar una reserva.        
    function mostrarMensajeReservar() {
      Swal.fire({
      title: '¬°RESERVA COMPLETADA!',
      text: 'Su reserva ha sido registrada y APROBADA con √âXITO, revisa tu correo para confirmar la reserva y obtener tu CLAVE de evento.',
      icon: 'success',
      showConfirmButton: true, // Muestra el bot√≥n de confirmaci√≥n
      allowOutsideClick: false, // Bloquea la interacci√≥n fuera del mensaje emergente
      allowEscapeKey: false, // Bloquea la interacci√≥n con la tecla Esc
      imageUrl: 'https://i.ibb.co/r31wpYT/AVATAR-EXITO-removebg-preview.png', // URL de la imagen
      imageWidth: 120, // Ancho de la imagen en p√≠xeles
      imageHeight: 235, // Alto de la imagen en p√≠xeles
      imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
      }).then((result) => {
      // Esta funci√≥n se ejecutar√° despu√©s de que el usuario haga clic en el bot√≥n de confirmaci√≥n
      });
    }

    // Esta funci√≥n verifica si hacen falta campos obligatorios en la secci√≥n "REGISTRAR RESERVA" y en caso de hacer 
    // falta arrojar√° una alerta diciendo que hacen falta campos y te dir√° tambi√©n cu√°les campos son los que faltan.
    function validarCamposRegistrarReserva() {
      // Obtener los valores de los campos
      var nombreEvento = document.getElementById("nombre-evento").value;
      var fechaEvento = document.getElementById("fecha-evento").value;
      var horaEvento = document.getElementById("hora-evento").value;
      var duracionEvento = document.getElementById("duracion-evento").value;
      var modalidadEvento = document.getElementById("modalidad-evento").value;
      var ubicacionPlataforma = document.getElementById("ubicacion-plataforma").value;
      var lugarPresencial = document.getElementById("lugar-presencial").value;
      var planEvento = document.getElementById("plan-evento").value;
      var observacionesEvento = document.getElementById("observaciones-evento").value;
      var nombreOrganizador = document.getElementById("nombre-organizador").value;
      var emailOrganizador = document.getElementById("email-organizador").value;
      var capitulo = document.getElementById("capitulo-organizador").value;
      var telefonoOrganizador = document.getElementById("telefono-organizador").value;
      var nombrePonente = document.getElementById("nombre-ponente").value;
      var emailPonente = document.getElementById("email-ponente").value;
      var telefonoPonente = document.getElementById("telefono-ponente").value;
      var publicidadComite = document.getElementById("publicidad-comite").value.toLowerCase();
      var fotoPonente = document.getElementById("foto-ponente").value;

      // Lista para almacenar los campos faltantes
      var camposFaltantes = [];

      // Verificar qu√© campos est√°n vac√≠os y agregar sus nombres a la lista
      if (nombreEvento.trim() === "") {
        camposFaltantes.push("Nombre del evento");
      }
      if (fechaEvento.trim() === "") {
        camposFaltantes.push("Fecha del evento");
      }
      if (horaEvento.trim() === "") {
        camposFaltantes.push("Hora del evento");
      }
      if (duracionEvento.trim() === "") {
        camposFaltantes.push("Duraci√≥n del evento");
      }
      if (modalidadEvento.trim() === "") {
        camposFaltantes.push("Modalidad del evento");
      }
      if (ubicacionPlataforma.trim() === "" && lugarPresencial.trim() === "") {
            camposFaltantes.push("Ubicaci√≥n en plataforma o Lugar presencial");
        }
      if (planEvento.trim() === "") {
        camposFaltantes.push("Plan del evento");
      }
      if (nombreOrganizador.trim() === "") {
        camposFaltantes.push("Nombre del organizador");
      }
      if (emailOrganizador.trim() === "") {
        camposFaltantes.push("Email del organizador");
      }
      if (capitulo.trim() === "") {
        camposFaltantes.push("Cap√≠tulo");
      }
      if (telefonoOrganizador.trim() === "") {
        camposFaltantes.push("Tel√©fono del organizador");
      }
      if (nombrePonente.trim() === "") {
        camposFaltantes.push("Nombre del ponente");
      }
      if (publicidadComite === "") {
          camposFaltantes.push("Publicidad S√ç/NO");
      }   
      if (publicidadComite === "si" && fotoPonente.trim() === "") {
        camposFaltantes.push("Foto del ponente");
      }

      // Mostrar la alerta si hay campos faltantes con la concatenaci√≥n de los campos faltantes.
      if (camposFaltantes.length > 0) {
        var mensaje = "Faltan campos por diligenciar:\n";
        for (var i = 0; i < camposFaltantes.length; i++) {
          mensaje += "- " + camposFaltantes[i] + "\n";
        }

        Swal.fire({
          title: '¬°FALTAN CAMPOS POR DILIGENCIAR EN TU RESERVA!',
          text: mensaje,
          icon: 'warning',
          confirmButtonText: 'Aceptar',
          allowOutsideClick: true,
          backdrop: true,  
          allowEscapeKey: true,
          imageUrl: 'https://i.ibb.co/CBcrYmF/AVATAR-FALTANCAMPOS-removebg-preview.png', // URL de la imagen
          imageWidth: 120, // Ancho de la imagen en p√≠xeles
          imageHeight: 235, // Alto de la imagen en p√≠xeles
          imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
        });
        return false;
      }

      return true; // Todos los campos est√°n llenos
    }

    function obtenerCorreoRegistrar(correoElectronico, capitulo) {
        // Banco de correos asociados a cada cap√≠tulo
        const bancoCorreos = {
            uniguajira: "academico_uniguajira@aneiap.co, interventoria_uniguajira@aneiap.co",
            unimagdalena: "academico_unimagdalena@aneiap.co",
            uniatlantico: "academico_uniatlantico@aneiap.co",
            uninorte: "academico_uninorte@aneiap.co, interventoria_uninorte@aneiap.co",
            cuc: "academico_cuc@aneiap.co, interventoria_cuc@aneiap.co",
            librequilla: "academico_librequilla@aneiap.co",
            utb: "academico_utb@aneiap.co",
            ufps: "academico_ufps@aneiap.co, interventoria_ufps@aneiap.co",
            unalmed: "academico_unalmed@aneiap.co",
            udea: "academico_udea@aneiap.co",
            upbmed: "academico_upbmed@aneiap.co",
            utp: "academico_utp@aneiap.co, interventoria_utp@aneiap.co",
            unalma: "academico_unalma@aneiap.co, interventoria_unalma@aneiap.co",
            udistrital: "academico_udistrital@aneiap.co",
            unalbog: "academico_unalbog@aneiap.co",
            univalle: "academico_univalle@aneiap.co",
            icesi: "academico_icesi@aneiap.co",
            usc: "academico_usc@aneiap.co, interventoria_usc@aneiap.co",
            librecali: "academico_librecali@aneiap.co, interventoria_librecali@aneiap.co",
            nacional: "academico@aneiap.co, interventoria@aneiap.co"
        };

        // Correo de usuario y correos asociados al cap√≠tulo
        const correosUsuario = correoElectronico ? correoElectronico + ", " : "";
        const correosCapitulo = bancoCorreos[capitulo.toLowerCase()] || "";

        // Devolver todos los correos concatenados
        return correosUsuario + correosCapitulo;
    }

    // Funci√≥n para enviar el correo de edici√≥n de reserva
    function enviarCorreoRegistro(claveReservaCreada) {
      // Obtener el correo del organizador para enviarle el correo
      const correoDestino = document.getElementById("email-organizador").value;
      const claveReserva = claveReservaCreada;

      const emailHost = "smtp.elasticemail.com"; // Reemplaza con el servidor SMTP correcto
      const emailUsername = "siea@aneiap.co"; // Reemplaza con tu nombre de usuario SMTP
      const emailPassword = "D20D124D2A2129252882BEE9DAC2B79F4E70"; // Reemplaza con tu contrase√±a SMTP
      const asunto = `Confirmaci√≥n de registro de reserva - Clave: ${claveReserva}`;

      // Datos adicionales de la reserva
      const nombreOrganizadorReserva= document.getElementById("nombre-organizador").value;
      const nombreEventoReserva= document.getElementById("nombre-evento").value;
      const fechaReserva = document.getElementById("fecha-evento").value;
      const horaReserva = document.getElementById("hora-evento").value;
      const duracionReserva = document.getElementById("duracion-evento").value;
      const planEvento = document.getElementById("plan-evento").value;
      const capitulo = document.getElementById("capitulo-organizador").value;
      const modalidadReserva = document.getElementById("modalidad-evento").value;
      const nombrePonente = document.getElementById("nombre-ponente").value;
      const publicidadComiteReserva = document.getElementById("publicidad-comite").value;
      const observacionesPublicidadReserva = document.getElementById("observaciones-publicidad").value;
      const fotoPonenteURLReserva = document.getElementById("foto-ponente").value;
      const ubicacionPlataformaReserva = document.getElementById("ubicacion-plataforma").value;
      const lugarPresencialReserva = document.getElementById("lugar-presencial").value;

      const destinatario = obtenerCorreoRegistrar(correoDestino, capitulo); // Reemplaza con la direcci√≥n de correo del destinatario junto al bancoCorreos

      // Convertir duraci√≥n a formato horas + minutos
      const duracionHoras = Math.floor(duracionReserva / 60);
      const duracionMinutos = duracionReserva % 60;

      // Convertir minutos a formato militar (HH:MM)
      const horasMilitar = Math.floor(horaReserva / 60);
      const minutosMilitar = horaReserva % 60;
      const horaMilitar = `${horasMilitar.toString().padStart(2, "0")}:${minutosMilitar.toString().padStart(2, "0")}`;

      // Datos adicionales para la publicidad
      let publicidad = "";
      if (publicidadComiteReserva === "si") {
        publicidad = `
          <p>El organizador ha solicitado la realizaci√≥n de la publicidad para el evento. A continuaci√≥n, se adjuntan las observaciones:</p>
          <p>${observacionesPublicidadReserva}</p>
          <p>Puede encontrar la foto del ponente en el siguiente enlace: <a href="${fotoPonenteURLReserva}" target="_blank">FOTO PONENTE</a></p>
        `;
      }

      // Mensaje de correo con los datos adicionales
      const mensaje = `
        <html>
          <body>
            <h1 style="color: #007BFF;">Su registro de reserva ha sido confirmado ‚òëÔ∏è</h1>
            <p>Estimado(a) <strong>${nombreOrganizadorReserva}</strong>,</p>
            <p>Le confirmamos que su registro de reserva para el evento <strong>${nombreEventoReserva}</strong> ha sido procesado correctamente.</p>
            <p>A continuaci√≥n, encontrar√° los detalles de su reserva:</p>
            <ul>
              <li><strong>Clave de la reserva:</strong> ${claveReserva}</li>
              <li><strong>Fecha de la reserva:</strong> ${fechaReserva}</li>
              <li><strong>Hora de la reserva:</strong> ${horaMilitar}</li>
              <li><strong>Cap√≠tulo:</strong> ${capitulo}</li>
              <li><strong>Duraci√≥n de la reserva:</strong> ${duracionHoras} hora(s) ${duracionMinutos} minuto(s)</li>
              <li><strong>Plan del evento:</strong> ${planEvento}</li>
              <li><strong>Modalidad de la reserva:</strong> ${modalidadReserva}</li>
              ${modalidadReserva === "virtual" ? `<li><strong>Plataforma:</strong> ${ubicacionPlataformaReserva}</li>` : `<li><strong>Ubicaci√≥n/Sal√≥n:</strong> ${lugarPresencialReserva}</li>`}
              <li><strong>Nombre del ponente:</strong> ${nombrePonente}</li>
            </ul>
            ${publicidad}
            <p>Si tiene alguna pregunta, inquietud o necesita asistencia adicional, no dude en <a href="http://wa.me/3002252099" target="_blank">hacer clic aqu√≠</a> para comunicarse con nosotros a trav√©s de WhatsApp.</p>
            <p>Recuerde que todas las claves son personales e intransferibles, no las comparta con nadie. üíôüíö</p>
            <p>Agradecemos su confianza en nosotros, recuerde que este correo es autom√°tico y NO debe ser respondido. Esperamos seguir construyendo A.L.M.A. üíôüíö</p>
            <p style="font-style: italic;">Cordialmente,</p>
            <p style="font-style: italic;">Alessandro Villanueva Cantillo</p>
            <p style="font-style: italic;">Administrador y creador SIEA</p>
          </body>
        </html>
      `;

      Email.send({
        Host: emailHost,
        Username: emailUsername,
        Password: emailPassword,
        To: `${destinatario}, siea@aneiap.co`, // Usuario que est√° registrando la reserva
     //   Cc: "siea@aneiap.co", // Copia a siea para siempre tener registro de correos
        From: emailUsername, // Deber√≠a ser la misma direcci√≥n de correo de Username
        Subject: asunto,
        Body: mensaje,
        ContentType: "text/html", // Indicar que el mensaje es de tipo HTML
      })
        .then((message) => {
          console.log("Mensaje de SMTPJS:", message);

            // Limpia los campos del formulario despu√©s de registrar el evento
            document.getElementById("nombre-evento").value = "";
            document.getElementById("fecha-evento").value = "";
            document.getElementById("hora-evento").value = "";
            document.getElementById("duracion-evento").value = "";
            document.getElementById("modalidad-evento").value = "";
            document.getElementById("ubicacion-plataforma").value = "";
            document.getElementById("lugar-presencial").value = "";
            document.getElementById("plan-evento").value = "";
            document.getElementById("observaciones-evento").value = "";
            document.getElementById("nombre-organizador").value = "";
            document.getElementById("email-organizador").value = "";
            document.getElementById("email-organizador").value = "";
            document.getElementById("telefono-organizador").value = "";
            document.getElementById("nombre-ponente").value = "";
            document.getElementById("email-ponente").value = "";
            document.getElementById("telefono-ponente").value = "";
            document.getElementById("publicidad-comite").value = "";
            document.getElementById("observaciones-publicidad").value = "";
            document.getElementById("foto-ponente").value = "";

          if (message === "OK") {
            console.log("Correo enviado con √©xito");
            // Puedes eliminar la alerta ya que no es necesaria
          } else {
            console.error("Error al enviar el correo:", message);
            // Puedes manejar el error de otra manera si lo deseas
          }
        })
        .catch((error) => {
          console.error("Error en la funci√≥n de env√≠o de correo:", error);
          // Puedes manejar el error de otra manera si lo deseas
        });
    }

    // Funci√≥n para enviar el correo de solicitud de publicidad
    function enviarSolicitudPublicidadRegistro(claveReservaCreada, escogioPublicidadNacional) {
    // Funci√≥n para enviar el correo de solicitud de publicidad
      // Obtener el correo del comit√© de piezas publicitarias
      const capitulo = document.getElementById("capitulo-organizador").value;
      // Banco de correos asociados a cada cap√≠tulo
      const bancoCorreos = {
        uniguajira: "comunicaciones_uniguajira@aneiap.co",
        unimagdalena: "comunicaciones_unimagdalena@aneiap.co",
        uniatlantico: "comunicaciones_uniatlantico@aneiap.co",
        uninorte: "comunicaciones_uninorte@aneiap.co, jorly.sarmiento@aneiap.co",
        cuc: "comunicaciones_cuc@aneiap.co",
        librequilla: "comunicaciones_librequilla@aneiap.co",
        utb: "comunicaciones_utb@aneiap.co",
        ufps: "comunicaciones_ufps@aneiap.co",
        unalmed: "comunicaciones_unalmed@aneiap.co",
        udea: "comunicaciones_udea@aneiap.co",
        upbmed: "comunicaciones_upbmed@aneiap.co",
        utp: "comunicaciones_utp@aneiap.co",
        unalma: "comunicaciones_unalma@aneiap.co",
        udistrital: "comunicaciones_udistrital@aneiap.co",
        unalbog: "comunicaciones_unalbog@aneiap.co",
        univalle: "comunicaciones_univalle@aneiap.co",
        icesi: "comunicaciones_icesi@aneiap.co",
        usc: "comunicaciones_usc@aneiap.co",
        librecali: "comunicaciones_librecali@aneiap.co",
        nacional: "proy_diseno_nacional@aneiap.co"
      };

      // Obtener el correo de destino dependiendo de la elecci√≥n del usuario
      let correoDestino = "";
      if (escogioPublicidadNacional === "no") {
          // Obtener el correo del comit√© de piezas publicitarias del cap√≠tulo
          correoDestino = bancoCorreos[capitulo];
      } else if (escogioPublicidadNacional === "si") {
          // Enviar la solicitud al comit√© de piezas publicitarias nacional
          correoDestino = "proy_diseno_nacional@aneiap.co";
      }

      // Datos adicionales de la solicitud de publicidad
      const emailOrganizadorReserva = document.getElementById("email-organizador").value;
      const nombreOrganizadorReserva = document.getElementById("nombre-organizador").value;
      const nombreEventoReserva= document.getElementById("nombre-evento").value;
      const fechaReserva = document.getElementById("fecha-evento").value;
      const horaReserva = document.getElementById("hora-evento").value;
      const planEvento = document.getElementById("plan-evento").value;
      const nombrePonente = document.getElementById("nombre-ponente").value;
      const publicidadComiteReserva = document.getElementById("publicidad-comite").value;
      const observacionesPublicidadReserva = document.getElementById("observaciones-publicidad").value;
      const fotoPonenteURLReserva = document.getElementById("foto-ponente").value;
      const modalidadEventoReserva = document.getElementById("modalidad-evento").value;
      const ubicacionPlataformaReserva = document.getElementById("ubicacion-plataforma").value;
      const lugarPresencialReserva = document.getElementById("lugar-presencial").value;

      const emailHost = "smtp.elasticemail.com"; // Reemplaza con el servidor SMTP correcto
      const emailUsername = "siea@aneiap.co"; // Reemplaza con tu nombre de usuario SMTP
      const emailPassword = "D20D124D2A2129252882BEE9DAC2B79F4E70"; // Reemplaza con tu contrase√±a SMTP
      const destinatario = correoDestino; // Reemplaza con la direcci√≥n de correo del destinatario
      const cc = `${emailOrganizadorReserva}, siea@aneiap.co`; // Copia de carbono (CC)
      const claveReserva = claveReservaCreada;
      const asunto = `Solicitud de Publicidad para el Espacio - "${nombreEventoReserva}" con clave de reserva terminada en ***********${claveReserva.slice(-4)}`;

      // Convertir minutos a formato militar (HH:MM)
      const horasMilitar = Math.floor(horaReserva / 60);
      const minutosMilitar = horaReserva % 60;
      const horaMilitar = `${horasMilitar.toString().padStart(2, "0")}:${minutosMilitar.toString().padStart(2, "0")}`;

      // Datos adicionales para la publicidad
      let publicidad = "";
      publicidad = `
        <p>El organizador ha solicitado la realizaci√≥n de la publicidad para el evento. A continuaci√≥n, se adjuntan las observaciones:</p>
        <p>${observacionesPublicidadReserva}</p>
        <p>Puede encontrar la foto del ponente en el siguiente enlace: <a href="${fotoPonenteURLReserva}" target="_blank">FOTO PONENTE</a></p>
      `;

      // Mensaje de correo con los datos para la publicidad
      const mensaje = `
        <html>
          <body>
            <h1 style="color: #007BFF;">Solicitud de Publicidad para el Evento</h1>
            <p>Estimado Comit√© de Piezas Publicitarias,</p>
            <p>Solicitamos la realizaci√≥n de publicidad para el siguiente evento:</p>
            <ul>
              <li><strong>Nombre del Evento:</strong> ${nombreEventoReserva}</li>
              <li><strong>Fecha del Evento:</strong> ${fechaReserva}</li>
              <li><strong>Hora del Evento:</strong> ${horaMilitar}</li>
              <li><strong>Capitulo:</strong> ${capitulo}</li>
              <li><strong>Plan del Evento:</strong> ${planEvento}</li>
              <li><strong>Nombre del Ponente:</strong> ${nombrePonente}</li>
              <li><strong>Modalidad:</strong> ${modalidadEventoReserva}</li>
              ${
                modalidadEventoReserva === "presencial"
                  ? `<li><strong>Ubicaci√≥n:</strong> ${lugarPresencialReserva}</li>`
                  : `<li><strong>Plataforma:</strong> ${ubicacionPlataformaReserva}</li>`
              }
            </ul>
            ${publicidad}
            <p>Por favor, revise esta solicitud y proporcione detalles sobre la publicidad requerida.</p>
            <p>Si tiene alguna pregunta o necesita informaci√≥n adicional, no dude en ponerse en contacto con nosotros.</p>
            <p>Recuerde que esta es una solicitud de publicidad proveniente de una RESERVA NUEVA y no contiene datos privados de la reserva.</p>
            <p>La pieza publicitaria debe ser enviada como respuesta a TODOS los destinatarios de este correo.</p>
            <p>Atentamente,</p>
            <p>${nombreOrganizadorReserva}</p>
            <p style="font-style: italic;">Organizador de la reserva</p>
          </body>
        </html>
      `;

      Email.send({
        Host: emailHost,
        Username: emailUsername,
        Password: emailPassword,
        To: destinatario,
        Cc: cc,
        From: emailUsername,
        Subject: asunto,
        Body: mensaje,
        ContentType: "text/html",
      })
        .then((message) => {
          console.log("Mensaje de SMTPJS:", message);

          if (message === "OK") {
            console.log("Correo enviado con √©xito");
          } else {
            console.error("Error al enviar el correo:", message);
          }
        })
        .catch((error) => {
          console.error("Error en la funci√≥n de env√≠o de correo:", error);
        });
    }

    function verificarDisponibilidadRegistro() {
        return new Promise((resolve, reject) => {
        var disponibilidadHorarios = Array(28).fill(true); // Inicialmente, todos los intervalos est√°n disponibles

        // var claveEvento = document.getElementById("clave-evento").value; // ya no es necesario esto
        var nuevaFecha = document.getElementById("fecha-evento").value;
        var nuevaHora = document.getElementById("hora-evento").value;
        var nuevaDuracion = document.getElementById("duracion-evento").value;
        var nuevoCapitulo = document.getElementById("capitulo-organizador").value;

        // Validaci√≥n de datos para que la fecha con la que se registrar√° el evento sea mayor a la de hoy.
        if (parseInt(nuevaDuracion) + parseInt(nuevaHora) > 1321) {
          Swal.fire({
            title: '¬°EST√ÅS INTENTANDO RESERVAR DESPU√âS DE LAS 22:00 (10PM)!',
            text: 'El evento debe estar programado para finalizar a m√°s tardar hasta las 22:00, ve a la duraci√≥n del mismo y ed√≠tala de tal forma que no se excedan las 22:00 (10pm)',
            icon: 'warning',
            confirmButtonText: 'Aceptar',
            imageUrl: 'https://i.ibb.co/kJ6gs4J/AVATAR-VALIDACIONDATOS-removebg-preview.png', // URL de la imagen
            imageWidth: 120, // Ancho de la imagen en p√≠xeles
            imageHeight: 235, // Alto de la imagen en p√≠xeles
            imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
          });
          return; // Detener el registro del evento
        }

        // Realiza una consulta a la base de datos para obtener las reservas en la nueva fecha
        var reservasRef = firebase.firestore().collection("reservas");

        // Primera consulta: Filtrar por "fechaEvento" igual a "nuevaFecha"
        if (nuevoCapitulo === "nacional") {
          // Si se seleccion√≥ "ANEIAP NACIONAL", consultar solo las reservas para toda la Asociaci√≥n
          consulta = reservasRef.where("fechaEvento", "==", nuevaFecha).where("capitulo", "==", "nacional");
        } else {
          // Consultar las reservas para el cap√≠tulo seleccionado y para toda la Asociaci√≥n (ANEIAP NACIONAL)
          consulta = reservasRef.where("fechaEvento", "==", nuevaFecha).where("capitulo", "in", [nuevoCapitulo, "nacional"]);
        }

        // Realizar el filtrado para obtener intervalos disponibles y no disponibles
        consulta.get().then(function(querySnapshot) {
          console.log("entramos a hacer consulta");
          // Ciclo para revisar cada evento reservado para la nueva fecha
          querySnapshot.forEach(function(doc) {
            console.log("este es el doc: " + doc);
            var horaEvento = doc.data().horaEvento; // Hora en minutos (ej. 540 para 09:00)
            var duracionEvento = doc.data().duracionEvento; // Duraci√≥n en minutos (ej. 120 para 2 horas)
            console.log("hora del evento con clave: " + doc.data().claveEvento + ": " + horaEvento);
            console.log("duracion del evento con clave: " + doc.data().claveEvento + ": " + duracionEvento);
            // Calcular los √≠ndices de inicio y fin del intervalo que ocupar√° el evento
            var inicioIntervalo = Math.floor((horaEvento - 480) / 30);
            var finIntervalo = inicioIntervalo + duracionEvento / 30;
            console.log("inicio intervalo: " + inicioIntervalo);
            console.log("fin intervalo: " + finIntervalo);

            // Marcar los intervalos como ocupados en el arreglo de disponibilidad
            for (var i = inicioIntervalo; i < finIntervalo; i++) {
              disponibilidadHorarios[i] = false;
            }
            console.log("estas son las disponibilidades de los intervalos:");
            console.log(disponibilidadHorarios);
          });

          // Calcula los √≠ndices de inicio y fin de los intervalos para la nueva hora y duraci√≥n
          var inicioNuevoIntervalo = Math.floor((nuevaHora - 480) / 30);
          var finNuevoIntervalo = inicioNuevoIntervalo + nuevaDuracion / 30;

          var disponibilidadMatutino = true;
          var disponibilidadVesperino = true;
          var disponibilidadNocturno = true;

          // Colocar los intervalos de un mismo paquete horario (matutino, vesperino o nocturno) ocupados
          // Verificar el paquete horario matutino (intervalos 1 al 10, es decir, 8:00 a 13:00)
          for (var i = 0; i <= 9; i++) {
            if (!disponibilidadHorarios[i]) {
              for (var j = 0; j <= 9; j++) {
                disponibilidadHorarios[j] = false;
              }
              disponibilidadMatutino = false;
              break; // Al menos un intervalo est√° ocupado, salir del ciclo
            }
          }

          // Verificar el paquete horario vespertino (intervalos 11 al 20, es decir, 13:00 a 18:00)
          for (var i = 10; i <= 19; i++) {
            if (!disponibilidadHorarios[i]) {
              for (var j = 10; j <= 19; j++) {
                disponibilidadHorarios[j] = false;
              }
              disponibilidadVesperino = false;
              break; // Al menos un intervalo est√° ocupado, salir del ciclo
            }
          }

          // Verificar el paquete horario nocturno (intervalos 21 al 28, es decir, 18:00 a 22:00)
          for (var i = 20; i <= 27; i++) {
            if (!disponibilidadHorarios[i]) {
              for (var j = 20; j <= 27; j++) {
                disponibilidadHorarios[j] = false;
              }
              disponibilidadNocturno = false;
              break; // Al menos un intervalo est√° ocupado, salir del ciclo
            }
          }

          // Calcula los √≠ndices de inicio y fin de los intervalos para la nueva hora y duraci√≥n
          var inicioNuevoIntervalo = Math.floor((nuevaHora - 480) / 30);
          var finNuevoIntervalo = inicioNuevoIntervalo + nuevaDuracion / 30;

          // Verifica si alguno de los nuevos intervalos est√° ocupado
          var algunIntervaloOcupado = false;
          for (var i = inicioNuevoIntervalo; i < finNuevoIntervalo; i++) {
            console.log("esta es la disponibilidad del intervalo " + i + ": " + disponibilidadHorarios[i]);
            if (!disponibilidadHorarios[i]) {
              console.log("est√° ocupado el intervalo " + i);
              algunIntervaloOcupado = true;
              break; // Si uno est√° ocupado, no es necesario verificar los dem√°s
            }
          }

          if (algunIntervaloOcupado) {
            // Al menos uno de los intervalos no est√° disponible
            // Mostrar alerta al usuario con SweetAlert2 en caso de estar TODO EL D√çA ocupado
            if (!disponibilidadMatutino && !disponibilidadVesperino && !disponibilidadNocturno) {
              Swal.fire({
              title: '¬°SIN DISPONIBILIDAD EN TODO EL D√çA! üìÖ',
              text: 'Ya no es posible reservar en ning√∫n espacio del d√≠a debido a que los 3 horarios para este d√≠a est√°n ocupados. Prueba a consultar la disponibilidad en la secci√≥n azul y escoger otro d√≠a.',
              icon: 'error',
              confirmButtonText: 'Aceptar',
              allowOutsideClick: true,
              backdrop: true,  
              allowEscapeKey: true,
              imageUrl: 'https://i.ibb.co/LPTDqcy/AVATAR-NODISPOTODODIA-removebg-preview.png', // URL de la imagen
              imageWidth: 120, // Ancho de la imagen en p√≠xeles
              imageHeight: 235, // Alto de la imagen en p√≠xeles
              imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
            });
            return; // Detener la ejecuci√≥n de la funci√≥n
            }
            // Mostrar alerta al usuario con SweetAlert2 en caso de estar ocupado el horario matutino.
            if (!disponibilidadMatutino && inicioNuevoIntervalo <= 9) {
              Swal.fire({
              title: '¬°SIN DISPONIBILIDAD EN EL HORARIO MATUTINO! üå§Ô∏è',
              text: 'El horario matutino ya est√° ocupado (8:00 a 13:00). Prueba cambiar el d√≠a, hora o duraci√≥n.',
              icon: 'error',
              confirmButtonText: 'Aceptar',
              allowOutsideClick: true,
              backdrop: true,  
              allowEscapeKey: true,
              imageUrl: 'https://i.ibb.co/4p0C8SC/AVATAR-HORARIOSNODISPO-removebg-preview.png', // URL de la imagen
              imageWidth: 120, // Ancho de la imagen en p√≠xeles
              imageHeight: 235, // Alto de la imagen en p√≠xeles
              imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
            });
            return; // Detener la ejecuci√≥n de la funci√≥n
            }
            // Mostrar alerta al usuario con SweetAlert2 en caso de estar ocupado el horario vespertino.
            if (!disponibilidadVesperino && inicioNuevoIntervalo <= 19) {
              Swal.fire({
              title: '¬°SIN DISPONIBILIDAD EN EL HORARIO VESPERTINO! ‚òÄÔ∏è',
              text: 'El horario vespertino ya est√° ocupado (13:00 a 18:00). Prueba cambiar el d√≠a, hora o duraci√≥n.',
              icon: 'error',
              confirmButtonText: 'Aceptar',
              allowOutsideClick: true,
              backdrop: true,  
              allowEscapeKey: true,
              imageUrl: 'https://i.ibb.co/4p0C8SC/AVATAR-HORARIOSNODISPO-removebg-preview.png', // URL de la imagen
              imageWidth: 120, // Ancho de la imagen en p√≠xeles
              imageHeight: 235, // Alto de la imagen en p√≠xeles
              imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
            });
            return; // Detener la ejecuci√≥n de la funci√≥n
            }
            // Mostrar alerta al usuario con SweetAlert2 en caso de estar ocupado el horario nocturno.
            if (!disponibilidadNocturno) {
              Swal.fire({
              title: '¬°SIN DISPONIBILIDAD EN EL HORARIO NOCTURNO! üåï',
              text: 'El horario nocturno ya est√° ocupado (18:00 a 22:00). Prueba cambiar el d√≠a, hora o duraci√≥n.',
              icon: 'error',
              confirmButtonText: 'Aceptar',
              allowOutsideClick: true,
              backdrop: true,  
              allowEscapeKey: true,
              imageUrl: 'https://i.ibb.co/4p0C8SC/AVATAR-HORARIOSNODISPO-removebg-preview.png', // URL de la imagen
              imageWidth: 120, // Ancho de la imagen en p√≠xeles
              imageHeight: 235, // Alto de la imagen en p√≠xeles
              imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
            });
            return; // Detener la ejecuci√≥n de la funci√≥n
            }
          } else {
            // Todos los intervalos est√°n disponibles
            // Realiza la edici√≥n de la reserva
            // ...
            resolve(true); // Resolver la promesa con 'true' si todos los intervalos est√°n disponibles
          }
        }).catch(function(error) {
          Swal.fire({
            title: '¬°ERROR DE CONSULTA!',
            text: 'Ocurri√≥ un error al obtener las reservas. Por favor, int√©ntalo de nuevo m√°s tarde o comun√≠cate con el creador de la plataforma.',
            icon: 'error',
            confirmButtonText: 'Aceptar',
            allowOutsideClick: true,
            backdrop: true,  
            allowEscapeKey: true,
            imageUrl: 'https://i.ibb.co/PZ7KXF9/AVATAR-ERRORES-removebg-preview.png', // URL de la imagen
            imageWidth: 120, // Ancho de la imagen en p√≠xeles
            imageHeight: 235, // Alto de la imagen en p√≠xeles
            imagePosition: 'top-start' // Posici√≥n de la imagen ('top-start', 'top', 'top-end', 'center', 'center-start', 'center-end', 'bottom-start', 'bottom', 'bottom-end')
          });
          console.log(error);
          resolve(false); // Resolver la promesa con 'false' en caso de error
          return;
        });
      }
    )}
/*
    const modoSwitch = document.getElementById('modo-switch');
    const body = document.body;
    const logos = document.querySelectorAll('.logo');

    modoSwitch.addEventListener('click', () => {
      body.classList.toggle('dark-mode');

      // Verifica si el body tiene la clase dark-mode
      if (body.classList.contains('dark-mode')) {
        // Si est√° en modo oscuro, muestra el logo dark y oculta el logo light
        logos.forEach((logo) => {
          if (logo.classList.contains('dark-mode')) {
            logo.style.display = 'block';
          } else {
            logo.style.display = 'none';
          }
        });
      } else {
        // Si est√° en modo claro, muestra el logo light y oculta el logo dark
        logos.forEach((logo) => {
          if (logo.classList.contains('light-mode')) {
            logo.style.display = 'block';
          } else {
            logo.style.display = 'none';
          }
        });
      }
    });
*/
    function iniciarSesionJDN() {
        Swal.fire({
            title: 'Validaci√≥n requerida',
            text: 'Ingresa la contrase√±a para la cuenta jdn@aneiap.co y poder reservar a nivel nacional.',
            input: 'password',
            inputLabel: 'Contrase√±a de JDN',
            inputPlaceholder: 'Ingresa la contrase√±a',
            inputAttributes: {
                maxlength: 20,
                autocapitalize: 'off',
                autocorrect: 'off'
            },
            showCancelButton: false,
            confirmButtonText: 'Validar',
            showLoaderOnConfirm: true,
            preConfirm: (password) => {
                return firebase.firestore().collection("cuentas").doc("jdn@aneiap.co").get()
                    .then(doc => {
                        if (!doc.exists) {
                            throw new Error('No se encontr√≥ la cuenta');
                        }
                        if (doc.data().pass !== password) {
                            Swal.showValidationMessage('La contrase√±a es incorrecta.');
                            return false; // Retornar false para que no se cierre el Swal
                        }
                        return true; // Retornar true para cerrar el Swal
                    })
                    .catch(error => {
                        Swal.showValidationMessage(`Error: ${error}`);
                        return false; // Retornar false para que no se cierre el Swal
                    });
            },
            allowOutsideClick: () => !Swal.isLoading()
        }).then((result) => {
            if (result.isConfirmed) {
                // Si la validaci√≥n es exitosa
                Swal.fire({
                    title: 'Inicio de sesi√≥n exitoso',
                    text: '¬°Has iniciado sesi√≥n correctamente!',
                    icon: 'success',
                    confirmButtonText: 'Aceptar'
                });
                // Asignar valores a las variables globales
                correoUsuario = "jdn@aneiap.co";
                capituloUsuario = "nacional";
            }
        });
    }

  </script>

</body>
</html>
